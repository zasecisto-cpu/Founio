<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Founio – vždy online (CZ/PL/SK)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="bg-white border-b sticky top-0 z-20">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="font-bold text-xl">Founio</div>
      <div class="text-sm text-slate-600">Druhá SIM, která nikdy neztratí signál</div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-8">
    <section class="bg-white p-6 rounded-2xl border shadow-sm">
      <h1 class="text-3xl font-bold">Vždy online v CZ/PL/SK</h1>
      <p class="mt-2 text-slate-600">Multi‑IMSI • bez FUP • bez řízení rychlosti. eSIM aktivace do 2 minut.</p>

      <div id="alert" class="hidden mt-4 p-3 rounded-md"></div>

      <div class="grid md:grid-cols-3 gap-6 mt-6">
        <article class="border rounded-xl p-5 bg-white">
          <h2 class="text-lg font-semibold">Founio Start</h2>
          <p class="text-sm text-slate-500">60 min + 10 SMS</p>
          <p class="text-3xl font-bold mt-3">299 Kč</p>
          <button class="mt-4 w-full bg-black text-white py-2 rounded-lg" onclick="buy('start')">Koupit – eSIM</button>
        </article>

        <article class="border rounded-xl p-5 bg-white">
          <h2 class="text-lg font-semibold">Founio Talk</h2>
          <p class="text-sm text-slate-500">Neomezené volání + 10 SMS</p>
          <p class="text-3xl font-bold mt-3">499 Kč</p>
          <button class="mt-4 w-full bg-black text-white py-2 rounded-lg" onclick="buy('talk')">Koupit – eSIM</button>
        </article>

        <article class="border rounded-xl p-5 bg-white">
          <h2 class="text-lg font-semibold">Founio Data</h2>
          <p class="text-sm text-slate-500">Neomezené volání + 10 SMS + 3 GB dat</p>
          <p class="text-3xl font-bold mt-3">699 Kč</p>
          <button class="mt-4 w-full bg-black text-white py-2 rounded-lg" onclick="buy('data')">Koupit – eSIM</button>
        </article>
      </div>

      <p class="text-xs text-slate-500 mt-4">Ceny s DPH. Platba přes Stripe Checkout. Po úspěšné platbě zašleme eSIM QR kód.</p>
    </section>
  </main>

  <footer class="max-w-5xl mx-auto px-4 py-10 text-sm text-slate-500">
    © <span id="year"></span> Founio / REGIS‑CZECH · Demo bez backoffice. Platby Stripe.
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    const STRIPE_PUBLISHABLE_KEY = "pk_test_REPLACE_ME";

    (function showStatusFromQuery() {
      const p = new URLSearchParams(location.search);
      const box = document.getElementById('alert');
      if (p.get('success')) {
        box.className = "mt-4 p-3 rounded-md bg-green-50 text-green-700";
        box.textContent = "Platba proběhla úspěšně. eSIM dorazí e‑mailem během chvíle.";
        box.classList.remove('hidden');
      } else if (p.get('canceled')) {
        box.className = "mt-4 p-3 rounded-md bg-amber-50 text-amber-800";
        box.textContent = "Platba byla zrušena. Zkuste to prosím znovu.";
        box.classList.remove('hidden');
      }
    })();

    async function buy(plan) {
      const stripe = Stripe(STRIPE_PUBLISHABLE_KEY);
      const res = await fetch("/.netlify/functions/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ plan })
      });
      const data = await res.json();
      if (data.error) { alert(data.error); return; }
      const { error } = await stripe.redirectToCheckout({ sessionId: data.id });
      if (error) alert(error.message);
    }
  </script>
</body>
</html>
